{"version":3,"sources":["BigListProcessor.js"],"names":["BigListItemType","BigListItemRecycler","isNumeric","BigListProcessor","constructor","scrollView","sections","headerHeight","footerHeight","sectionHeaderHeight","itemHeight","sectionFooterHeight","insetTop","insetBottom","numColumns","uniform","getItemHeight","section","index","Number","getHeaderHeight","getFooterHeight","getSectionHeaderHeight","getSectionFooterHeight","process","top","bottom","prevItems","items","recycler","position","counter","height","spacerHeight","isFullRow","item","type","ITEM","isVisibleBelow","isVisible","force","SECTION_HEADER","fullRow","prevHeight","push","itemsArray","forEach","get","pushSpacer","SPACER","pushItem","getSpacerHeight","itemsCounter","reduce","totalHeight","i","length","HEADER","rows","initialSpacerHeight","prevSection","splice","SECTION_FOOTER","FOOTER","fill","scrollToPosition","targetSection","targetIndex","animated","scrollTop","foundIndex","Math","ceil","uniformHeight","scrollTo","x","y","max"],"mappings":"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","sourcesContent":["import { BigListItemType } from \"./BigListItem\";\nimport BigListItemRecycler from \"./BigListItemRecycler\";\nimport { isNumeric } from \"./utils\";\n\nexport default class BigListProcessor {\n  /**\n   * Constructor.\n   * @param {ScrollView} scrollView\n   * @param {array[]|object|null|undefined} sections\n   * @param {number|function|null|undefined} headerHeight\n   * @param {number|function|null|undefined} footerHeight\n   * @param {number|function|null|undefined} sectionHeaderHeight\n   * @param {number|function|null|undefined} itemHeight\n   * @param {number|function|null|undefined} sectionFooterHeight\n   * @param {number|function|null|undefined} insetTop\n   * @param {number|function|null|undefined} insetBottom\n   * @param {number|null|undefined} numColumns\n   */\n  constructor({\n    scrollView,\n    sections,\n    headerHeight,\n    footerHeight,\n    sectionHeaderHeight,\n    itemHeight,\n    sectionFooterHeight,\n    insetTop,\n    insetBottom,\n    numColumns,\n  }) {\n    this.headerHeight = headerHeight;\n    this.footerHeight = footerHeight;\n    this.sectionHeaderHeight = sectionHeaderHeight;\n    this.itemHeight = itemHeight;\n    this.sectionFooterHeight = sectionFooterHeight;\n    this.sections = sections;\n    this.insetTop = insetTop;\n    this.insetBottom = insetBottom;\n    this.uniform = isNumeric(itemHeight);\n    this.scrollView = scrollView;\n    this.numColumns = numColumns;\n  }\n\n  /**\n   * Get item height.\n   * @returns {number|*}\n   */\n  getItemHeight(section, index) {\n    const { itemHeight } = this;\n    return isNumeric(itemHeight)\n      ? Number(itemHeight)\n      : itemHeight(section, index);\n  }\n\n  /**\n   * Get header height.\n   * @returns {number|*}\n   */\n  getHeaderHeight() {\n    const { headerHeight } = this;\n    return isNumeric(headerHeight) ? Number(headerHeight) : headerHeight();\n  }\n\n  /**\n   * Get footer height.\n   * @returns {number|*}\n   */\n  getFooterHeight() {\n    const { footerHeight } = this;\n    return isNumeric(footerHeight) ? Number(footerHeight) : footerHeight();\n  }\n\n  /**\n   * Get section height.\n   * @returns {number|*}\n   */\n  getSectionHeaderHeight(section) {\n    const { sectionHeaderHeight } = this;\n    return isNumeric(sectionHeaderHeight)\n      ? Number(sectionHeaderHeight)\n      : sectionHeaderHeight(section);\n  }\n\n  /**\n   * Get section footer height.\n   * @returns {number|*}\n   */\n  getSectionFooterHeight(section) {\n    const { sectionFooterHeight } = this;\n    return isNumeric(sectionFooterHeight)\n      ? Number(sectionFooterHeight)\n      : sectionFooterHeight(section);\n  }\n\n  /**\n   * Process list items.\n   * @param {number} top\n   * @param {number} bottom\n   * @param {array} prevItems\n   * @returns {{items: [], height: *}}\n   */\n  process(top, bottom, prevItems) {\n    const { sections } = this;\n    const items = [];\n    const recycler = new BigListItemRecycler(prevItems);\n\n    let position;\n    let counter = -1; // Counter of items per row pushed\n    let height = this.insetTop;\n    let spacerHeight = height;\n\n    /**\n     * The width of the row is the entire line.\n     * @param {object} item\n     * @returns {boolean}\n     */\n    const isFullRow = (item) => {\n      // Only items can be rendered with column format, so all others are full row\n      return item.type !== BigListItemType.ITEM;\n    };\n\n    /**\n     * Is visible below.\n     * @param {object} item\n     * @returns {boolean}\n     */\n    const isVisibleBelow = (item) => {\n      const { height: itemHeight } = item;\n      counter = -1;\n      if (height > bottom) {\n        spacerHeight += itemHeight;\n        return false;\n      } else {\n        return true;\n      }\n    };\n\n    /**\n     * Is the item visible.\n     * @param {object} item\n     * @param {bool} force\n     * @returns {boolean}\n     */\n    const isVisible = (item, force = false) => {\n      // Check section headers visibility below\n      if (item.type === BigListItemType.SECTION_HEADER) {\n        return isVisibleBelow(item);\n      }\n      // Dimensions\n      const { height: itemHeight } = item;\n      const fullRow = isFullRow(item);\n      const prevHeight = height;\n      // Increase or reset counter\n      counter = fullRow ? -1 : counter + 1;\n      if (fullRow || counter % this.numColumns === 0) {\n        height += itemHeight;\n      }\n      // Check if is visible\n      if (force || (height > top && prevHeight < bottom)) {\n        return true;\n      } else {\n        if (fullRow || counter % this.numColumns === 0) {\n          spacerHeight += itemHeight;\n        }\n        return false;\n      }\n    };\n\n    /**\n     * Get recycled views and push items.\n     * @param {object} itemsArray\n     */\n    const push = (...itemsArray) => {\n      itemsArray.forEach((item) => {\n        items.push(recycler.get(item));\n      });\n    };\n\n    /**\n     * Push spacer.\n     * @param {object} item\n     */\n    const pushSpacer = (item) => {\n      if (spacerHeight > 0) {\n        push({\n          type: BigListItemType.SPACER,\n          position: item.position - spacerHeight,\n          height: spacerHeight,\n          section: item.section,\n          index: item.index,\n        });\n        spacerHeight = 0;\n      }\n    };\n\n    /**\n     * Push the item when is visible.\n     * @param {object} item\n     * @param {bool} force\n     */\n    const pushItem = (item, force = false) => {\n      if (isVisible(item, force)) {\n        pushSpacer(item);\n        push(item);\n      }\n    };\n\n    /**\n     * Calculate spacer height.\n     */\n    const getSpacerHeight = () => {\n      let itemsCounter = -1;\n      return items.reduce((totalHeight, item, i) => {\n        if (i !== items.length - 1) {\n          const fullRow = isFullRow(item);\n          itemsCounter = fullRow ? 0 : itemsCounter + 1;\n          if (fullRow || itemsCounter % this.numColumns === 0) {\n            return totalHeight + item.height;\n          }\n        }\n        return totalHeight;\n      }, 0);\n    };\n\n    // Header\n    const headerHeight = this.getHeaderHeight();\n    if (headerHeight > 0) {\n      position = height;\n      pushItem(\n        {\n          type: BigListItemType.HEADER,\n          position: position,\n          height: headerHeight,\n        },\n        true,\n      );\n    }\n    // Sections\n    for (let section = 0; section < sections.length; section++) {\n      const rows = sections[section];\n      if (rows === 0) {\n        continue;\n      }\n      // Section Header\n      const sectionHeaderHeight = this.getSectionHeaderHeight(section);\n      position = height;\n      height += sectionHeaderHeight;\n      if (\n        section > 1 &&\n        items.length > 0 &&\n        items[items.length - 1].type === BigListItemType.SECTION_HEADER\n      ) {\n        // Top Spacer\n        const initialSpacerHeight = getSpacerHeight();\n        const prevSection = items[items.length - 1];\n        items.splice(0, items.length);\n        push(\n          {\n            type: BigListItemType.HEADER,\n            position: position,\n            height: headerHeight,\n          },\n          {\n            type: BigListItemType.SPACER,\n            position: 0,\n            height: initialSpacerHeight - headerHeight,\n            section: prevSection.section,\n            index: 0,\n          },\n          prevSection,\n        );\n      }\n      pushItem({\n        type: BigListItemType.SECTION_HEADER,\n        position: position,\n        height: sectionHeaderHeight,\n        section: section,\n      });\n      // Items\n      let itemHeight = this.getItemHeight(section);\n      for (let index = 0; index < rows; index++) {\n        if (!this.uniform) {\n          itemHeight = this.getItemHeight(section, index);\n        }\n        position = height;\n        pushItem({\n          type: BigListItemType.ITEM,\n          position: position,\n          height: itemHeight,\n          section: section,\n          index: index,\n        });\n      }\n      // Section Footer\n      const sectionFooterHeight = this.getSectionFooterHeight(section);\n      if (sectionFooterHeight > 0) {\n        position = height;\n        pushItem({\n          type: BigListItemType.SECTION_FOOTER,\n          position: position,\n          height: sectionFooterHeight,\n          section: section,\n        });\n      }\n    }\n    // Footer\n    const footerHeight = this.getFooterHeight();\n    if (footerHeight > 0) {\n      position = height;\n      pushItem(\n        {\n          type: BigListItemType.FOOTER,\n          position: position,\n          height: footerHeight,\n        },\n        true,\n      );\n    }\n    // Bottom Spacer\n    height += this.insetBottom;\n    spacerHeight += this.insetBottom;\n    if (spacerHeight > 0) {\n      push({\n        type: BigListItemType.SPACER,\n        position: height - spacerHeight,\n        height: spacerHeight,\n        section: sections.length,\n      });\n    }\n    recycler.fill();\n    return {\n      height,\n      items,\n    };\n  }\n\n  /**\n   * Scroll to position.\n   * @param {int} targetSection\n   * @param {int} targetIndex\n   * @param {boolean} animated\n   */\n  scrollToPosition(targetSection, targetIndex, animated) {\n    const { sections, insetTop } = this;\n\n    // Header + inset\n    let scrollTop = insetTop + this.getHeaderHeight();\n    let section = 0;\n    let foundIndex = false;\n    while (section <= targetSection) {\n      const rows = Math.ceil(sections[section] / this.numColumns);\n      if (rows === 0) {\n        section += 1;\n        continue;\n      }\n      // Section header\n      scrollTop += this.getSectionHeaderHeight(section);\n\n      // Items\n      if (this.uniform) {\n        const uniformHeight = this.getItemHeight(section);\n        if (section === targetSection) {\n          scrollTop += uniformHeight * Math.ceil(targetIndex / this.numColumns);\n          foundIndex = true;\n        } else {\n          scrollTop += uniformHeight * rows;\n        }\n      } else {\n        for (let index = 0; index < rows; index++) {\n          if (\n            section < targetSection ||\n            (section === targetSection && index < targetIndex)\n          ) {\n            scrollTop += this.getItemHeight(\n              section,\n              Math.ceil(index / this.numColumns),\n            );\n          } else if (section === targetSection && index === targetIndex) {\n            foundIndex = true;\n            break;\n          }\n        }\n      }\n\n      // Section footer\n      if (!foundIndex) {\n        scrollTop += this.getSectionFooterHeight(section);\n      }\n      section += 1;\n    }\n    this.scrollView.scrollTo({\n      x: 0,\n      y: Math.max(0, scrollTop - this.getSectionHeaderHeight(targetSection)),\n      animated,\n    });\n    return true;\n  }\n}\n"]}